!function(e){"use strict";function t(){}function r(e,t){return t?e.replace(/\{([^\}]+)\}/g,function(e,r){return t[r]}):function(t){return r(e,t)}}function a(){for(var e,t=w.call(arguments),r=w.call(arguments);r;){for(e in r)t[e]=r[e];r=w.call(arguments)}return t}function n(e){var t=e[0].toUpperCase()+e.substr(1);return t.replace(/([a-z])([A-Z])/,function(e,t,r){return t+"-"+r})}function o(e){var t=e[0].toLowerCase()+e.substr(1);return t.replace(/([a-z])-([A-Z])/,function(e,t,r){return t+r})}function s(e,t,r){var a=e.match(y);return"json"===a[3]?JSON.parse(data):"xml"===a[3]?r:t}function c(e,t){t=t||{},t.headers=t.headers||{},t.url=e;var r=null,a={resolve:[],reject:[]};try{r=new XMLHttpRequest}catch(c){try{r=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){r=new ActiveXObject("Microsoft.XMLHTTP")}}if(null===r)throw"Browser does not support HTTP Request";r.open((t.method||"get").toUpperCase(),e);for(var u in t.headers)r.setRequestHeader(n(u),t.headers[u]);r.resolve=function(e){a.resolve.forEach(function(t){t(e)})},r.reject=function(e){a.reject.forEach(function(t){t(e)})};var p;return r.getHeaders=function(){return p||(p=r.getAllResponseHeaders().replace(/\s*([^\:]+)\s*\:\s*([^\;\n]+)/g,function(e,t,a){r.headers[o(t)]=a.trim()})),p},r.onreadystatechange=function(){if("complete"===r.readyState||4===r.readyState){var e={data:s(contentType,text,xml),status:r.status,headers:r.getHeaders,xhr:r};if(r.status>=200&&r.status<300)r.resolve(e);else{if(!(r.status>=400))throw new Error("Unexpected status code "+r.status);r.reject(e)}}},r.options=t,r.send(t.data),{then:function(e,t){a.resolve.push(e),t instanceof Function&&a.reject.push(onreject)},error:function(e){a.reject.push(e)}}}function i(e){if(e=e||{},e.version=e.version||x.version,e.sandbox=(void 0===e.sandbox?x.sandbox:e.sandbox)?".sandbox":"",e.paramsStr="",e.params)for(var t in e.params)e.paramsStr+=(e.paramsStr?"&":"?")+t+"="+encodeURIComponent(e.params[t]);return e}function u(e){if(!e)throw new Error("aplazame.init({options}) requires options");if(!e.publicKey)throw new Error("aplazame.init({options}) requires at least the publicKey");a(x,e)}function p(){return x}function f(e){return e=i(e),c(b.host+e.paramsStr,{headers:{accept:r(b.accept,e)}})}function l(e){return e=i(e),c(b.host+e.paramsStr,{method:"post",headers:{accept:r(b.accept,e)}})}function d(e){}function m(){var e=document.createElement("iframe");e.src="data:text/html;charset=utf-8,"+encodeURI(h),a(e.style,v),e.frameBorder="0",document.body.appendChild(e)}var h="<!DOCTYPE html><html><head><meta charset=\"utf-8\"><title>Aplazame Checkout</title></head><body ui-view=\"\"></body></html>",v={position:"fixed",top:0,left:0,width:"100%",height:"100%"},b={host:"https://api.aplazame.com/",accept:"application/vnd.aplazame{sandbox}-v{version}+json"};t.prototype={version:1,sandbox:!1};var x=new t,w=[].shift,y=/([^\/]+)\/([^+]+\+)?(.*)/;if(document.querySelector("script[data-aplazame]")){var g=document.querySelector("script[data-aplazame]").getAttribute("data-aplazame");if(/\s/.test(g)){var j={};g.split(",").forEach(function(e){var t=e.match(/^([^\:]+)\:(.*)/);j[t[1].trim()]=t[2].trim()}),u(j)}else u({publicKey:g})}e.aplazame={init:u,getEnv:p,checkout:m,button:d,apiGet:f,apiPost:l}}(this);