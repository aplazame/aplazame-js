!function e(t,r,n){function a(i,c){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return a(r?r:e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){var n=document.querySelector('script[src*="aplazame.js"]')||document.querySelector('script[src*="aplazame.min.js"]');if(n){var a=n.src.split("?"),o=a&&a[1]&&a[1].match(/sandbox\=([^&]*)/);o&&aplazame.init({},{sandbox:"1"===o[1]||"true"===o[1]})}if(document.querySelector("script[data-aplazame]")){var i=document.querySelector("script[data-aplazame]"),c=i.getAttribute("data-aplazame"),s={},u={};if(/\:/.test(c)?c.split(",").forEach(function(e){var t=e.match(/^([^\:]+)\:(.*)/);s[t[1].trim()]=t[2].trim()}):c&&(s.publicKey=c),i.getAttribute("data-version")){var l=i.getAttribute("data-version").match(/^v?(\d)(\.(\d))?$/);if(!l)throw new Error("malformed version, should be like 'v1.2'");u.version=Number(l[1]),void 0!==l[3]&&(u.checkoutVersion=Number(l[3]))}i.getAttribute("data-sandbox")&&(u.sandbox="true"===i.getAttribute("data-sandbox")),i.getAttribute("data-analytics")&&(s.analytics="true"===i.getAttribute("data-analytics")),aplazame.init(s,u)}},{}],2:[function(e,t,r){var n=document.querySelector("[data-aplazame-button]");if(n){var a={button:"[data-aplazame-button]",description:"[data-aplazame-button-info]",parent:n.getAttribute("data-parent"),publicKey:n.getAttribute("data-aplazame-button"),amount:n.getAttribute("data-amount"),currency:n.getAttribute("data-currency")||void 0,sandbox:n.getAttribute("data-sandbox")?"true"===n.getAttribute("data-sandbox"):void 0,country:n.getAttribute("data-country")||void 0};aplazame.button(a)}},{}],3:[function(e,t,r){function n(e){var t=e[0].toUpperCase()+e.substr(1);return t.replace(/([a-z])([A-Z])/,function(e,t,r){return t+"-"+r})}function a(e){var t=e[0].toLowerCase()+e.substr(1);return t.replace(/([a-z])-([A-Z])/,function(e,t,r){return t+r})}function o(e,t,r){var n=e&&e.match(c);return n&&("json"===n[3]?JSON.parse(t):"xml"===n[3]?r:t)}function i(e,t){t=t||{},t.headers=t.headers||{},t.url=e;var r=null,i={resolve:[],reject:[]};try{r=new XMLHttpRequest}catch(c){try{r=new ActiveXObject("Msxml2.XMLHTTP")}catch(s){r=new ActiveXObject("Microsoft.XMLHTTP")}}if(null===r)throw"Browser does not support HTTP Request";r.open((t.method||"get").toUpperCase(),e),t.withCredentials&&(r.withCredentials=!0);for(var u in t.headers)r.setRequestHeader(n(u),t.headers[u]);r.resolve=function(e){i.resolve.forEach(function(t){t(e)})},r.reject=function(e){i.reject.forEach(function(t){t(e)})};var l;return r.getHeaders=function(){return l||(l={},r.getAllResponseHeaders().replace(/\s*([^\:]+)\s*\:\s*([^\;\n]+)/g,function(e,t,r){l[a(t)]=r.trim()})),l},r.onreadystatechange=function(){if("complete"===r.readyState||4===r.readyState){var e={data:o(r.getResponseHeader("content-type"),r.responseText,r.responseXML),status:r.status,headers:r.getHeaders,xhr:r};if(r.status>=200&&r.status<300)r.resolve(e);else{if(!(r.status>=400))throw new Error("Unexpected status code "+r.status);r.reject(e)}}},r.options=t,r.send(t.data),{then:function(e,t){i.resolve.push(e),t instanceof Function&&i.reject.push(t)},error:function(e){i.reject.push(e)}}}var c=/([^\/]+)\/([^+]+\+)?(.*)/;t.exports=i},{}],4:[function(e,t,r){(function(t){function r(e){e=e||{};var t=e.publicKey||h.publicKey;if(!t)throw new Error("public key needs to be specified");if(e=p.merge({},{headers:{authorization:"Bearer "+t}},e),e.version=e.version||f.version,e.sandbox=(void 0===e.sandbox?f.sandbox:e.sandbox)?".sandbox":"",e.paramsStr="",e.params)for(var r in e.params)e.paramsStr+=(e.paramsStr?"&":"?")+r+"="+encodeURIComponent(e.params[r]);return console.log("apiOptions",e),p.merge(e,{headers:{accept:p.replaceKeys(m,e)}})}function n(e,t){p.extend(f,t||{}),p.extend(h,e||{}),console.debug("init",h,f)}function a(e,t){t=r(t);var n=e?p.joinPath(f.host,e):f.host;return l(n+t.paramsStr,t)}function o(e,t,n){n=r(n);var a=e?p.joinPath(f.host,e):f.host;return l(a+n.paramsStr,p.merge(n,{method:"post",data:t}))}function i(e){if(!e)throw new Error("aplazame.button requires parameters");var t,r;if(e.button?r=document.querySelector(e.button):e.id&&(r=document.querySelector((/^#/.test(e.id)?"":"#")+e.id)),!r)throw new Error("button can not be identified ( please use - id: 'button-id' - or - button: '#button-id' - )");if(t=[r],e.parent)for(var n=r.parentElement;n&&n!==document.body;){if(n.matchesSelector(e.parent)){t.push(n);break}n=n.parentElement}e.description&&[].push.apply(t,document.querySelectorAll(e.description)),t.forEach(function(e){e.__display=e.style.display,e.style.display="none"});var o={amount:e.amount,currency:e.currency||"EUR"};e.country&&(o.country=e.country),a("checkout/button",{params:o}).then(function(){t.forEach(function(e){e.style.display=e.__display})})}function c(e,t){var r=e.contentWindow.document;r.charset="UTF-8",r.open(),r.write(t),r.close()}function s(e){e=e||{};var t=("location"===e.host?location.origin:e.host)||"https://aplazame.com/static/checkout/";e.api=f,/\/$/.test(t)||(t+="/"),l(t+"iframe.html").then(function(r){document.body.style.overflow="hidden";var n=r.data.replace(/<head\>/,'<head><base href="'+t+'" />'),a=document.createElement("iframe");if(p.extend(a.style,d),a.frameBorder="0",document.body.appendChild(a),c(a,n),!e.merchant)throw new Error("missing merchant parameters");if(!e.merchant.public_api_key){if(!h.publicKey)throw new Error("missing public key");e.merchant.public_api_key=h.publicKey}p.listen(window,"message",function(t){if(a){var r=t.data;if("checkout"===r.aplazame)if("merchant"===r.require)t.source.postMessage({checkout:e},"*");else if(r.close)switch(document.body.removeChild(a),a=null,r.close){case"dismiss":location.replace(e.merchant.checkout_url||"/");break;case"success":location.replace(e.merchant.success_url);break;case"cancel":location.replace(e.merchant.cancel_url)}}})},function(){throw new Error("can not connect to "+t)})}function u(e,t,r){p.isFunction(t)?(r=t,t={}):t=t||{};var n={params:{amount:e}};t.payday&&(n.params.payday=t.payday),t.publicKey&&(n.publicKey=t.publicKey),a("instalment-plan-simulator",n).then(function(e){p.isFunction(r)&&r(e.data.choices[0].instalments)})}var l=e("./http"),p=e("./utils"),d={position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"transparent","z-index":2147483647},f={host:"https://api.aplazame.com/",version:1,checkoutVersion:1,sandbox:!1},m="application/vnd.aplazame{{sandbox}}.v{{version}}+json",h={};t.aplazame={init:n,checkout:s,button:i,apiGet:a,apiPost:o,simulator:u},e("./data-aplazame"),e("./data-button")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./data-aplazame":1,"./data-button":2,"./http":3,"./utils":5}],5:[function(e,t,r){function n(e){return function(t){return typeof t===e}}function a(e){return function(t){return t instanceof e}}function o(e){var t;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}function i(e){"complete"===document.readyState?e():g(window,"load",e)}function c(e,t){return t?e.replace(/\{\{([^\}]+)\}\}/g,function(e,r){return t[r]}):function(t){return c(e,t)}}function s(){for(var e,t=w.call(arguments),r=w.call(arguments);r;){for(e in r)t[e]=r[e];r=w.call(arguments)}return t}function u(){for(var e,t=w.call(arguments),r=w.call(arguments);r;){if(typeof t!=typeof r&&(t=h(r)?[]:p(r)?{}:r),p(r))for(e in r)void 0!==r[e]&&(typeof t[e]!=typeof r[e]?t[e]=u(void 0,r[e]):h(t[e])?[].push.apply(t[e],r[e]):p(t[e])?t[e]=u(t[e],r[e]):t[e]=r[e]);r=w.call(arguments)}return t}function l(){return[].reduce.call(arguments,function(e,t,r,n){return t=r?t.replace(/^\//,""):t,t=r===n.length-1?t:t.replace(/\/$/,""),e+(r?"/":"")+t},"")}Element.prototype.matchesSelector||(Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector);var p=n("object"),d=n("function"),f=n("string"),m=n("number"),h=Array.isArray||a(Array),y=a(Date),b=a(RegExp),v=function(e){return e&&1===e.nodeType},g=window.addEventListener?function(e,t,r){e.addEventListener(t,r,!1)}:window.attachEvent&&function(e,t,r){e.attachEvent("on"+t,r)};if(!g)throw new Error("Your Browser does not support events");var w=[].shift;t.exports={isObject:p,isFunction:d,isString:f,isNumber:m,isArray:h,isDate:y,isRegExp:b,isElement:v,listen:g,once:o,ready:i,replaceKeys:c,merge:u,extend:s,joinPath:l}},{}]},{},[4]);