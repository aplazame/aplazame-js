<div class="aplazame-widget aplazame-widget--type-<%= type %> aplazame-widget--align-<%= preferences.align || 'center' %><% if( preferences.custom_styles && !preferences.api_custom_styles ){ %> aplazame-widget--custom-styles<% } %>">

  <div class="aplazame-widget-container">

  <% if( preferences.smart_title ) { %>
    <div class="aplazame-widget-smart-title"><%= choice.annual_equivalent === 0 ? ( preferences.title_zero_interest || '¡Consíguelo sin intereses!' ) : ( preferences.title_default || 'Págalo a plazos' ) %></div>
  <% } %>

  <div class="aplazame-widget-instalments" <% if( type !== 'select' && type !== 'big-button' ){ %> data-action="showInfo"<% } %>>

    <% if( type === 'select' ){ %>
    <select>
      <% for ( var i = 0, n = choices.length ; i < n ; i++ ) { %>
      <option value="<%= choices[i].num_instalments %>" <%= choices[i] == choice ? 'selected' : '' %>><span class="apz-price_widget-amount"><%= getPrice(choices[i].amount, currency) %>/mes</span> en <%= choices[i].num_instalments %> <%= choices[i].num_instalments > 1 ? 'cuotas' : 'cuota' %></option>
      <% } %>
    </select>
    <% } %>

    <span class="aplazame-widget-from">desde&nbsp;</span><!--
    --><strong class="aplazame-widget-amount"><!--
      <% if( currency === 'EUR' )  { %>
      --><span class="aplazame-widget-price"><%= getAmount(choice.amount, ',', '.') %></span><!--
      --><span class="aplazame-widget-currency">€</span><!--
      <% } else { %>
      --><span class="aplazame-widget-currency">$</span><!--
      --><span class="aplazame-widget-price"><%= getAmount(choice.amount, '.', ',') %></span><!--
      <% } %>
    --></strong><!--
    --><sub class="aplazame-widget-per-month">/mes</sub><!--
    --><span class="aplazame-widget-instalments-wrapper"><!--
      --><span class="aplazame-widget-instalments-pre-in">&nbsp;en&nbsp;</span><!--
      --><em class="aplazame-widget-instalments-num"><%= choice.num_instalments %></em><!--
      --><span class="aplazame-widget-instalments-post-instalments">&nbsp;cuotas</span><!--
    --></span>

  </div>

  <% if( type === 'big-button' || preferences.show_instalments_buttons ){ %>
  <div class="aplazame-widget-choice-buttons-wrapper">
    <span class="aplazame-widget-choice-text-in">en&nbsp;</span>
    <span class="aplazame-widget-choice-button">
      <button type="button" class="aplazame-widget-choice-button-decrease" data-action="decreaseNumInstalments">
        <svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
          <path d="m 3,6 h 6" stroke="currentColor" stroke-width="1"/>
        </svg>
      </button>
      <div class="aplazame-widget-choice-button-value"><%= choice.num_instalments %></div>
      <button type="button" class="aplazame-widget-choice-button-increase" data-action="increaseNumInstalments">
        <svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
          <path d="m 3,6 h 6" stroke="currentColor" stroke-width="1"/>
          <path d="m 6,3 v 6" stroke="currentColor" stroke-width="1"/>
        </svg>
      </button>
    </span>
    <span class="aplazame-widget-choice-text-instalments">&nbsp;cuotas</span>
  </div>
  <% } %>

  <% if( preferences.branding ){ %>
  <div class="aplazame-widget-branding">
    <span class="aplazame-widget-with">con&nbsp;</span>
    <svg width="77" height="20" viewBox="0 0 77 20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M28 11.2v-.6h-1.2c-1 0-1.4.2-1.4.8 0 .5.4.8 1 .8 1 0 1.5-.3 1.5-1m1.8 1.4c0 .4-.3.7-.7.7-.2 0-.4 0-.6-.3l-.2-.3c-.4.4-1 .7-2 .7-1.4 0-2.2-.7-2.2-2s1-2 2.6-2H28v-.2c0-.7-.5-1.2-1.5-1.2-.4 0-1 .2-1 .3H25c-.4 0-.6-.2-.6-.5 0-.2 0-.5.3-.6.4-.2 1-.4 2-.4 1.8 0 2.6 1 2.6 2.4v2c0 .4 0 .5.2.7l.2.2v.4M35 11.2v-1-1.3c-.3-.7-.7-1-1.3-1-.5 0-1 .3-1.2 1V11c.2.6.7 1 1.2 1 .6 0 1-.4 1.2-1M31 15V7.5c0-.5.2-.8.7-.8.4 0 .6.3.7.7.3-.4.8-.7 1.7-.7 1.2 0 2 .6 2.3 1.6.2.5.2 1 .2 1.7 0 .8 0 1.3-.2 1.8-.3 1-1 1.6-2.2 1.6-.8 0-1.3-.3-1.6-.8V15c0 .4-.3.7-.7.7-.5 0-.8-.3-.8-.8M39.5 13.3c-1.2 0-1.7-.6-1.7-1.8V5c0-.5.3-.8.7-.8.5 0 .8.3.8.8v6.4c0 .4 0 .6.5.6.4 0 .6.3.6.7 0 .3-.2.6-.7.6h-.2zM45 11.2v-.6h-1c-1 0-1.4.2-1.4.8 0 .5.4.8 1 .8 1 0 1.5-.3 1.5-1m2 1.4c0 .4-.4.7-.8.7-.2 0-.4 0-.6-.3l-.2-.3c-.4.4-1 .7-2 .7-1.4 0-2.2-.7-2.2-2s1-2 2.5-2H45v-.2c0-.7-.3-1.2-1.3-1.2-.5 0-1 .2-1.2.3H42c-.2 0-.5-.2-.5-.5 0-.2 0-.5.4-.6.3-.2 1-.4 2-.4 1.7 0 2.5 1 2.5 2.4V12l.3.2.2.4M48.5 13.3c-.4 0-.7-.3-.7-.7 0-.3.2-.5.5-1l3-3.4h-2.6c-.4 0-.7-.3-.7-.7 0-.3.3-.6.7-.6h3.7c.4 0 .7.2.7.5s0 .6-.4 1l-3 3.4h2.8c.4 0 .7.2.7.6 0 .4-.2.7-.6.7h-4zM58 11.2v-.6h-1.2c-1 0-1.4.2-1.4.8 0 .5.4.8 1 .8 1 0 1.5-.3 1.5-1m1.7 1.4c0 .4-.3.7-.7.7-.3 0-.5 0-.6-.3l-.2-.3c-.4.4-1 .7-2 .7-1.4 0-2.2-.7-2.2-2s1-2 2.5-2h1.3v-.2c0-.7-.3-1.2-1.3-1.2-.5 0-1 .2-1.2.3H55c-.4 0-.7-.2-.7-.5 0-.2 0-.5.4-.6.4-.2 1-.4 2-.4 1.7 0 2.6 1 2.6 2.4V12l.3.2v.4M60.8 7.6c0-.5.3-.8.8-.8.4 0 .7.3.7.7.3-.4 1-.7 1.7-.7.8 0 1.4.3 1.8.8.5-.5 1-.8 2-.8 1.5 0 2.3 1 2.3 2.3v3.5c0 .5-.2.8-.6.8-.5 0-.8-.3-.8-.8v-3c0-1-.4-1.4-1.2-1.4-.7 0-1.2.6-1.2 1.5v3c0 .5-.3.8-.7.8-.5 0-.8-.3-.8-.8v-3c0-1-.4-1.4-1.2-1.4-.7 0-1.2.6-1.2 1.5v3c0 .5-.3.8-.7.8-.5 0-.8-.3-.8-.8v-5zM75.4 8.8c-.2-.5-.6-.8-1.2-.8s-1 .3-1.3.8l-.2.6h2.6v-.6m-3.8 2.8c-.2-.4-.3-1-.3-1.5 0-.6 0-1 .2-1.5.4-1 1.4-1.7 2.6-1.7 1.5 0 2.4.6 2.8 1.7L77 10c0 .3-.2.6-.5.6H73h-.2v.5c.3.7.8 1 1.6 1 .5 0 1 0 1.3-.4l.5-.2c.4 0 .6.3.6.7 0 .3 0 .5-.3.6-.5.5-1.2.8-2.3.8-1.3 0-2.3-.7-2.6-1.8M18 7.3c.4-.6.3-1.3-.2-1.6-.6-.4-1.3-.2-1.6.3-.8 1-1.8 2-3 2.6l-3-7.8c-.2-.4-.6-.7-1-.7-.5 0-1 .3-1 .8L5 7.5l2 1 2-4.2 2 5.2-2 .2C6 9.7 3.6 8.4 2 6 1.7 5.6 1 5.5.4 6 0 6 0 6.8.2 7.4c2 3 5.4 4.6 9 4.6 1 0 1.8 0 2.8-.4l3 7.6c.2.6.8 1 1.4.6.6-.2 1-1 .7-1.4l-3-7.6c1.7-.8 3-2 4-3.5zM2.8 13.7c-.3.6 0 1.3.6 1.5.6.3 1.2 0 1.5-.6l.8-2c-.7-.2-1.4-.5-2-1l-1 2z"/></g></svg>
  </div>
  <% } %>

  </div>

</div>

<% if( ( !preferences.custom_styles || preferences.api_custom_styles ) && type !== 'text' ){ %>
<style rel="stylesheet">
  <% if(preferences.text_color) { %>
  .aplazame-widget:not(.aplazame-widget--custom-styles) { color: <%= preferences.text_color %>; }
  <% } %>

  <% if(preferences.btn_text_color) { %>
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-big-button .aplazame-widget-container,
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-button .aplazame-widget-instalments,
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-select .aplazame-widget-instalments {
    color: <%= preferences.btn_text_color %>;
  }

  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-select .aplazame-widget-instalments::before {
    <%= 'background-image: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' height=\'12\' width=\'8\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\' stroke=\'' + preferences.btn_text_color + '\'%3E%3Cpath d=\'M.752 3L3.966.5 7.252 3M.752 9l3.214 2.5L7.252 9\'/%3E%3C/g%3E%3C/svg%3E");' %>
  }
  <% } %>
  <% if(preferences.btn_bg_color) { %>
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-big-button .aplazame-widget-container,
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-button .aplazame-widget-instalments::before,
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-select .aplazame-widget-instalments::before {
    background-color: <%= preferences.btn_bg_color %>;
  }
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-button .aplazame-widget-instalments:hover::before,
  .aplazame-widget:not(.aplazame-widget--custom-styles).aplazame-widget--type-select .aplazame-widget-instalments:hover::before {
    background-color: <%= /^#/.test(preferences.btn_bg_color) ? lighten(preferences.btn_bg_color, -5) : preferences.btn_bg_color %>;
  }
  <% } %>
</style>
<% } %>
<% if( preferences.custom_styles ){ %>
<!-- <style rel="stylesheet"><%= custom_styles.replace(/\.aplazame-widget(?=[ \.])/g, '.aplazame-widget:not(.aplazame-widget--custom-styles)') %></style> -->
<style rel="stylesheet"><%= custom_styles %></style>
<% } %>
